{% extends "shop/base.html" %}
{% load static %}
{% block title %}
{{ product.name }}
{% endblock %}
{% block content %}
<div class="product-detail">
    <img src="{% if product.image %}{{ product.image.url }}{% else %}
    {% static "img/no_image.png" %}{% endif %}">
    <h1>Name: {{ product.name }}</h1>
    <h2>Init date: {{ product.init_dateTime }}</h2>
    <h2>Finish date: {{ product.finish_dateTime }}</h2>
    <h2>
    Category: 
        <a href="{{ product.category.get_absolute_url }}">
            {{ product.category }}
        </a>
    </h2>
    <h2>
    Professor: {{ product.professor }}
    </h2>
    <button data-product="{{product.id}}" data-action="add" class="btn btn-outline-secondary add-btn update-cart">Add to Cart</button>
    <h2>
    Subjetc: {{ product.subject}}
    </h2>
    <p class="price">Price: ${{ product.price }}</p>
    <p class="quota">Plazas disponibles: {{ product.quota }}</p>
    <h3>description:</h3> {{ product.description|linebreaks }}

    {% with comments.count as total_comments %}
    <h2>
        {{ total_comments }} comment{{ total_comments|pluralize }}
    </h2>
    {% endwith %}

    {% for comment in comments %}
    <div class="comment">
        <p class="info">
            Comment {{ forloop.counter }} by {{ comment.name }}
            {{ comment.created }}
        </p>
        {{ comment.body|linebreaks }}
    </div>
    {% empty %}
    <p>There are no comments.</p>
    {% endfor %}
    {% if user.is_authenticated %}
    {% include "shop/product/includes/comment_form.html" %}
    {% endif%}
</div>
{% endblock %}